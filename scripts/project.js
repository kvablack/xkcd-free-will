map = ["start.png", ["hey, there's something political on the news.", 2, "i wonder if i can install linux on here...", 37],
       "golive.png", ["continue...", 3],
       "debateleft.png", ["...and that is why free will is a myth, and we are all pawns in a cosmic game of chinese checkers.", 6, "Then how do you propose we solve our emu problem?", 4, "All hail Lord Xenu, perpetual provider of happiness.", 8],
       "debateright.png", ["one word... narrow alleyways. they can't run backwards, or at least they don't want to.", 5],
       "debateleft.png", ["same thing, considering free will is a myth.", 10],
       "debateright.png", ["do you mean chess?", 7, "hard determinism? you really believe every action is the direct result of another?", 11],
       "debateleft.png", ["does it matter? you get the point, the game plays you.", 10],
       "debateright.png", ["as you can see, my opponent is intent on his cultish ways. i want our citizens to be free, and have their will be heard!", 9],
       "debateleft.png", ["did you just say 'free will'? what a joke!", 10],
       "debateright.png", ["hard determinism? you really believe every action is the direct result of another?", 11],
       "debateleft.png", ["of course.", 12, "ask laplace's demon, he would know. the position and velocity of every atom in the universe kind of lets him predict the future.", 12, "quantum randomness and uncertainty don't have nearly enough effect on brain cells to mean decision-making is remotely free.", 12],
       "debateright.png", ["but ideas interact, and influence each other. we generate and choose between those ideas, of our own will.", 13, "you kids and your darn science. this is worse than that climate change scam!", 15, "ridiculous! determine <span style='font-style:italic;'>this!</span>", 17],
       "debateleft.png", ["ideas are just synapses firing in somebody's brain, and those are just particles interacting.", 14],
       "debateright.png", ["but... free will... has to exist...", 15],
       "debatekneel.png", ["<span style='font-size:13px;'>why do you refuse to believe? stop deceiving yourself, it doesn't have to be this way! we can still go about our normal, determined lives without changing a thing!</span>", 16, "luke, i am your father.", 16],
       "debateright.png", ["no! determine <span style='font-style:italic;'>this!</span>", 17],
       "debatesword.png", ["continue...", 18],
       /*END OF DEBATE*/"start.png", ["well, that guy's definitely crazy.", 19, "i'm suddently re-hyped for the new star wars.", 19, "i think i agree with the one on the left. he has hair.", 20],
       "walkin.png", ["you're just as crazy as they are. by the way, the bald guy's right, just for the wrong reasons.", 21, "there's a t-rex at the door.", 49],
       "walkin.png", ["really? i find bald people more trustworthy for some reason. he's also right.", 21, "there's a t-rex at the door.", 49],
       "walkout.png", ["you're becoming one of them.", 22, "agreeing with that guy? next thing you know, <span style='font-style:italic;'>you'll</span> start losing your hair.", 22],
       "walktree.png", ["you see, free will and science could exist at the same time - i'ts called compatibilism. i just need to figure out how.", 23],
       "jumpover.png", ["i have to disprove both determinism and pessimistic indeterminism with one theory.", 24],
       "walkgirlsay.png", ["what's pessimistic determinism?", 26, "why the pessimism? i prefer glass all the way full with a strong alchoholic drink.", 25],
       "walkgrass.png", ["don't we all? but pessimistic indeterminism is where even a lack of determinism means no free will because everything is fundamentally random.", 27],
       "walkgrass.png", ["it's where even a lack of determinism means no free will because everything is fundamentally random.", 27],
       "walkzoomout.png", ["that actually sounds pretty convincing. ", 28, "then it seems free will can never exist between that and hard determinism.", 28],
       "jumpover.png", ["<span style='font-size:13px;'>but what if, theoretically, there was a function that decided events by spitting out the next digit of an irrational number?</span>", 29],
       "walktree.png", ["that way, nothing could predict the outcome based on past results, but it wouldn't technically be random!", 30],
       "arguegirl.png", ["yeah, but does this function actually exist?", 31, "i'm ignoring you because you used the word theoretically.", 31, "i'm ignoring you because you used the word technically.", 31],
       "argueguy.png", ["shut up! i need to justify to myself that free will exists!", 32],
        "stormawayguy.png", ["you feed on my happiness.", 33],
        /*START END SEQUENCE*/"alonegirl4.png", ["continue...", 34],
        "alonegirl5.png", ["continue...", 35],
        "alonegirl6.png", ["continue...", 36],
        "end.png", ["the end"],
       "computerquestion.png", ["continue...", 38],
       "computertalk.png", ["great, now i have to look up how to free an incompatible partition.", 39],
       "computerspeaks.png", ["continue...", 40],
       "start.png", ["what's this? free will?", 45, "no, not really. thanks, google.", 41],
       "walkin.png", ["did i hear free will?", 42, "there's a t-rex at the door.", 49],
       "walkingirlsay.png", ["apparently incompatibilism is where someone believes free will can't exist without disproving determinism.", 47, "wait, how did you hear that if i never said it out loud?", 43],
        "walkinguysay.png", ["telepathy.", 44],
        "walkinguysay.png", ["so, did i hear free will?", 46],
        "walkin.png", ["did i hear free will?", 46, "there's a t-rex at the door.", 49],
        "walkingirlsay.png", ["apparently incompatibilism is where someone believes free will can't exist without disproving determinism.", 47],
        "walkin.png", ["i was actually just thinking about how to fix that!", 48],
        "walkout.png", ["since when did you become a philosopher?", 22, "as long as you don't have another existential crisis.", 22],
        "walkout.png", ["another one?", 50],
        "trexfar.png", ["hi, i'm the swami vivekananda! i'm here to explain eastern free will philosophy!", 51],
        "guylookup.png", ["why are you a dinosaur?", 52, "the 19th-centry Indian monk and Hindu revivalist? Always wanted to meet you!", 53, "you seem like a pretty convenient kick-starter to the plot.", 54],
       "trexclose.png", ["something about a metaphor for having antiquated ideas.", 55, "why <span style='font-style:italic;'>aren't</span> you a dinosaur?", 55],
        "trexclose.png", ["finally, a fan!", 55, "stop lying.", 55],
        "trexclose.png", ["segways are hard. especially into philosophy.", 55],
        "trexfar.png", ["anyhow, i belive that free will itself is a contradiction. all will is confined by the laws of the universe, so it can't be free!", 56],
        "guylookup.png", ["...", 57],
        "trexstompsay.png", ["for example, if i crush your house, it was actually the will of the Brahman! <br/><br/><br/>", 58],
        "trexstomp.png", ["continue...", 59],
        "wakeup.png", ["continue...", 60],
        "wakeup2.png", ["continue...", 61],
        "yawnsay.png", ["i still think free will might exist.", 62, "have you seen jurassic park lately?", 63],
        "yawngirlsay.png", ["not this again.", 65, "what are you, from the 19th century? quit being such a dinosaur.", 65],
        "yawngirlsay.png", ["did you have the dinosaur dream again?", 64],
        "yawnguysay.png", ["i still think free will might exist.", 62],
        "walkout.png", ["as long as you don't have another existential crisis.", 22]
]

function choose(text, name) {
    var placeholders = document.getElementsByClassName("option-placeholder");
    if (name == "58") {
        placeholders[placeholders.length - 1].style.background = "rgba(0,0,0,0)";
    }
    if (text != "continue...") {
        placeholders[placeholders.length - 1].firstChild.innerHTML = text;
        if (name != "58") {
            placeholders[placeholders.length - 1].style.background = "white";
        }
        
    }
    document.getElementsByClassName("options showing")[0].remove();
    renderNext(Number(name - 1));
}

function renderNext(index) {
    var body = document.getElementsByTagName("body")[0];
    body.innerHTML = body.innerHTML.toString() + `<div class="panel showing" style="position: relative; margin: 9px;"><img src="images/${map[index * 2]}" style="position: static; vertical-align: top;"><span class="option-placeholder" style="position: absolute; top: 10px; left: 8px; height: 108px; width: 186px; text-align: center; font-family: xkcd; font-size: 15px; color: rgb(0, 0, 0); overflow: hidden;"><span style="position: absolute; left: 0px; right: 0px; bottom: 0px;"></span></span>
    <ul class="options showing">
        <li class="option-line">
            <div onclick="choose(this.innerHTML, this.className.substring(12))" class="option-text ${map[index * 2 + 1][1]}" style="font-family: xkcd; font-size: 15px;">${map[index * 2 + 1][0]}</div>
        </li>
        <li class="option-line">
            <div onclick="choose(this.innerHTML, this.className.substring(12))" class="option-text ${map[index * 2 + 1][3]}" style="font-family: xkcd; font-size: 15px;">${map[index * 2 + 1][2]}</div>
        </li>
        <li class="option-line">
            <div onclick="choose(this.innerHTML, this.className.substring(12))" class="option-text ${map[index * 2 + 1][5]}" style="font-family: xkcd; font-size: 15px;">${map[index * 2 + 1][4]}</div>
        </li>
        <li class="option-line">
            <div onclick="choose(this.innerHTML, this.className.substring(12))" class="option-text ${map[index * 2 + 1][7]}" style="font-family: xkcd; font-size: 15px;">${map[index * 2 + 1][6]}</div>
        </li>
    </ul>
</div>`;
    cleanUp();
}

function cleanUp() {
    var choices = document.getElementsByClassName("option-line");
    for (var i = choices.length - 1; i >= 0; i--) {
        if (choices[i].getElementsByTagName("div")[0].innerHTML.toString() == "continue...") {
            var placeholders = document.getElementsByClassName("option-placeholder");
            placeholders[placeholders.length - 1].remove();
        }
        if (choices[i].getElementsByTagName("div")[0].innerHTML.toString() == "the end") {
            var placeholders = document.getElementsByClassName("option-placeholder");
            placeholders[placeholders.length - 1].remove();
            var options = document.getElementsByClassName("options showing");
            options[options.length - 1].remove();
        }
        if (choices[i].getElementsByTagName("div")[0].innerHTML.toString() == "undefined") {
            choices[i].remove();
        }
        setTimeout(function(){
            window.scrollBy(0, 1000);
        }, 100);
       
    }
}